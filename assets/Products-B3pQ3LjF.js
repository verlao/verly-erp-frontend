import{d as xe,r as u,k as ve,A as ge,o as be,c as n,b as i,e,f as $,q as S,h as x,v as w,t as a,B,F as W,y as Q,n as q,C as Y,s as y,w as fe,D as ee,E as ye}from"./index-CBVtFMj7.js";import{p as V}from"./product-CFv7uy6m.js";import{p as J}from"./product-cost-DD73Jxr2.js";import{E as z}from"./EditableCell-COsnEQW5.js";import{u as he}from"./cart-LR9xT-qt.js";import"./api-DTbpR62m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const we={class:"min-h-screen bg-gray-50"},ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ce={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8"},Pe={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6"},Ve={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_e={class:"border border-gray-200 rounded-lg p-4"},Ee={class:"border border-gray-200 rounded-lg p-4"},Ae={class:"border border-gray-200 rounded-lg p-4"},Me={class:"mb-4"},$e={class:"relative"},Be={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Fe={class:"px-6 py-4 border-b border-gray-200"},Ie={class:"text-sm text-gray-600 mt-1"},Re={key:0,class:"flex items-center justify-center h-64"},Te={key:1,class:"text-center py-16"},je={key:2,class:"overflow-x-auto"},Se={class:"w-full"},ze={class:"bg-white divide-y divide-gray-200"},Ne=["data-product-key"],Le={class:"px-6 py-5 font-medium text-gray-900 text-sm"},Ke={class:"px-6 py-5 text-gray-700 text-sm"},Ue={class:"px-6 py-5 text-gray-700 text-sm"},De={class:"text-xs"},Oe={class:"text-gray-400"},He={class:"px-6 py-5 text-gray-700 text-sm"},qe={class:"px-6 py-5 text-gray-700 text-sm"},Je=["onClick"],Xe={class:"px-6 py-5 font-mono text-blue-600 text-sm"},Ze={class:"px-6 py-5 font-mono font-semibold text-gray-900 text-sm"},Ge={class:"px-6 py-5 font-mono font-semibold text-green-600 text-sm"},We={class:"px-6 py-5 text-sm"},Qe={key:0,class:"space-y-1"},Ye={class:"font-mono font-semibold text-blue-600"},et={class:"text-xs text-gray-500"},tt={key:1,class:"text-gray-400"},ot={class:"px-6 py-5 font-mono text-purple-600 font-semibold text-sm"},st={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},lt={class:"flex justify-end space-x-2"},rt=["onClick","disabled"],at=["onClick"],nt=["onClick"],it={key:3,class:"flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200"},dt={class:"flex-1 flex justify-between sm:hidden"},ut=["disabled"],ct=["disabled"],pt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},mt={class:"text-sm text-gray-700"},xt={class:"font-medium"},vt={class:"font-medium"},gt={class:"font-medium"},bt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ft=["disabled"],yt=["onClick"],ht=["disabled"],wt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},kt={class:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Ct={class:"sticky top-0 bg-white p-6 border-b border-gray-200 rounded-t-lg"},Pt={class:"flex items-center justify-between"},Vt={class:"text-xl font-semibold text-gray-900"},_t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Et={key:0,class:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200"},At={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Mt={class:"text-center p-3 bg-white rounded-lg border"},$t={class:"font-mono text-lg font-semibold text-gray-900"},Bt={class:"text-center p-3 bg-white rounded-lg border"},Ft={class:"font-mono text-lg font-semibold text-orange-600"},It={class:"text-center p-3 bg-white rounded-lg border"},Rt={class:"font-mono text-lg font-semibold text-blue-600"},Tt={class:"mt-8 flex justify-end space-x-3 pt-6 border-t border-gray-200"},jt=["disabled"],St={key:0,class:"flex items-center"},zt={key:1},Nt={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Lt={class:"bg-white rounded-lg shadow-xl w-full max-w-md"},Kt={class:"p-6"},Ut={class:"text-center"},Dt={class:"text-sm text-gray-600 mb-6"},Ot={class:"text-gray-900"},Ht={class:"flex justify-end space-x-3"},qt=["disabled"],Jt=["disabled"],Xt={key:0,class:"flex items-center"},Zt={key:1},lo=xe({__name:"Products",setup(Gt){const te=he(),h=u([]),p=u(null),N=u(!0),_=u(!1),F=u(!1),k=u(!1),I=u(!1),E=u(!1),L=u(""),K=u(""),R=u(""),d=u(1),U=u(10),A=u(0),v=u(0),l=u({key:"",category:"",type:"",sheets:0,kit:0,width:0,height:0,weight:0,measure:0,color:"",cost:0,price:0,profit:0,laborValue:0,createdDate:"",installments:[]}),C=u(null),g=u(""),b=u(""),P=u(null),X=ve(()=>h.value);ge([L,K],()=>{d.value=1,m()},{deep:!0});function M(s){d.value=s,m()}function oe(){const t=v.value,o=d.value;if(t<=5)return Array.from({length:t},(j,H)=>H+1);const r=Math.floor(5/2);let c=Math.max(1,o-r),f=Math.min(t,c+5-1);return f-c+1<5&&(c=Math.max(1,f-5+1)),Array.from({length:f-c+1},(j,H)=>c+H)}be(async()=>{await Promise.all([m(),T()])});async function T(){try{const s=await J.getAll();s&&s.length>0&&(p.value=s[0])}catch(s){console.error("Erro ao carregar custos:",s)}}async function m(){try{N.value=!0;const s={page:d.value-1,size:U.value};L.value&&(s.type=L.value),K.value&&(s.color=K.value);let t;if(R.value.trim()?(s.query=R.value.trim(),t=await V.search(s)):t=await V.getAll(s),t&&typeof t=="object"&&"content"in t){const o=t;h.value=o.content,A.value=o.totalElements,v.value=o.totalPages}else h.value=Array.isArray(t)?t:[],A.value=h.value.length,v.value=1}catch(s){console.error("Erro ao carregar produtos:",s)}finally{N.value=!1}}let Z;function se(){clearTimeout(Z),Z=setTimeout(()=>{d.value=1,m()},300)}function le(s){if(!s.price||!s.cost)return"-";const t=s.price-s.cost,o=t/s.price*100;return`R$ ${t.toFixed(2)} (${o.toFixed(1)}%)`}function D(s){s?(l.value={...s},console.log("openModal - Produto original:",s),console.log("openModal - Kit do produto:",s.kit),console.log("openModal - currentProduct após cópia:",l.value),console.log("openModal - Kit do currentProduct:",l.value.kit),b.value=s.kit?`R$ ${s.kit.toFixed(2).replace(".",",")}`:"",console.log("openModal - kitInputValue definido como:",b.value),k.value=!0):(l.value={key:"",category:"",type:"",sheets:0,kit:0,width:0,height:0,weight:0,measure:0,color:"",cost:0,price:0,profit:0,createdDate:"",installments:[]},b.value="",k.value=!1),_.value=!0}async function re(){try{if(I.value=!0,console.log("Payload sendo enviado:",JSON.stringify(l.value,null,2)),console.log("Kit value:",l.value.kit),console.log("Kit input value:",b.value),k.value&&l.value.key)await V.update(l.value.key,l.value);else{const s=await V.create(l.value);s&&s.key&&(l.value.key=s.key)}_.value=!1,await m()}catch(s){console.error("Erro ao salvar produto:",s),alert("Erro ao salvar produto. Tente novamente.")}finally{I.value=!1}}function ae(s){P.value=s,F.value=!0}async function ne(){if(P.value?.key)try{E.value=!0,await V.delete(P.value.key),F.value=!1,P.value=null,await m()}catch(s){console.error("Erro ao excluir produto:",s),alert("Erro ao excluir produto. Tente novamente.")}finally{E.value=!1}}function ie(s){if(!s.price){alert("Este produto não possui preço definido.");return}te.addItem(s,1),alert(`${s.type} - ${s.color} adicionado ao carrinho!`)}function de(s){C.value=s.key||null,g.value=s.kit?.toString()||"",ye(()=>{const t=document.querySelector('input[ref="kitInput"]');t&&(t.focus(),t.select())})}async function G(){if(!C.value)return;const s=h.value.find(o=>o.key===C.value);if(!s)return;const t=s.kit;try{const o=g.value.trim()===""?null:parseFloat(g.value);if(g.value.trim()!==""&&(isNaN(o)||o<0)){alert("Por favor, insira um valor válido para o kit");return}s.kit=o??void 0;const r=await V.update(s.key,s),c=h.value.findIndex(f=>f.key===s.key);c!==-1&&(h.value[c]=r),C.value=null,g.value=""}catch(o){console.error("Erro ao salvar kit:",o),s.kit=t,alert("Erro ao salvar o valor do kit. Tente novamente.")}}function ue(){C.value=null,g.value=""}function ce(s){return s?typeof s=="string"?s.startsWith("R$")?s:`R$ ${s}`:`R$ ${s.toFixed(2).replace(".",",")}`:"R$ 0,00"}function pe(s){const t=s.target;let o=t.value;if(o=o.replace(/\D/g,""),o===""){b.value="",l.value.kit=0;return}const r=parseInt(o)/100;b.value=`R$ ${r.toFixed(2).replace(".",",")}`,l.value.kit=r,console.log("handleKitInput - Raw value:",t.value),console.log("handleKitInput - Cleaned value:",o),console.log("handleKitInput - Numeric value:",r),console.log("handleKitInput - currentProduct.kit:",l.value.kit)}async function O(s,t){if(p.value)try{p.value[s]=t,await J.update(p.value),await m()}catch(o){console.error("Erro ao salvar custo do vidro:",o),alert("Erro ao salvar o valor do vidro. Tente novamente."),await T()}}async function me(s,t,o){if(!(!o||!o.key||!p.value))try{console.log("handleLaborInlineEdit chamado:",{product:o.type,value:t});let r="";const c=o.type;c==="JANELA"?r="laborWindow":c==="SACADA"?r="laborBalcony":c==="BASCULANTE"?r="laborTilting":c==="FIXO"?r="laborFixed":c==="BOX"?r="laborBox":r="laborDoor",console.log("Campo de mão de obra determinado:",r);const f=Array.isArray(p.value)?p.value[0]:p.value;console.log("Custo atual:",f);const j={...f,[r]:typeof t=="string"?parseFloat(t):t};console.log("Custo atualizado:",j),console.log("Chamando productCostService.update..."),await J.update(j),console.log("productCostService.update concluído"),await T(),await m()}catch(r){console.error("Erro ao atualizar mão de obra:",r),alert("Erro ao salvar mão de obra. Tente novamente."),await T(),await m()}}return(s,t)=>(i(),n("div",we,[e("div",ke,[e("div",Ce,[t[22]||(t[22]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-gray-900"},"Produtos"),e("p",{class:"text-gray-600 mt-1"},"Gerencie seus produtos de vidro temperado")],-1)),e("button",{onClick:t[0]||(t[0]=o=>D()),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-medium flex items-center space-x-2"},[...t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 5v14M5 12h14"})],-1),e("span",null,"Novo Produto",-1)])])]),p.value?(i(),n("div",Pe,[t[26]||(t[26]=e("h2",{class:"text-base font-medium text-gray-900 mb-3"},"Custos do Vidro Temperado",-1)),e("div",Ve,[e("div",_e,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Incolor",-1)),S(z,{cost:p.value,field:"incolor","is-money":!0,onUpdate:O},null,8,["cost"])]),e("div",Ee,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Verde",-1)),S(z,{cost:p.value,field:"verde","is-money":!0,onUpdate:O},null,8,["cost"])]),e("div",Ae,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fumê",-1)),S(z,{cost:p.value,field:"fume","is-money":!0,onUpdate:O},null,8,["cost"])])])])):$("",!0),e("div",Me,[e("div",$e,[t[27]||(t[27]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})])],-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>R.value=o),onInput:se,type:"text",placeholder:"Buscar produtos...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[w,R.value]])])]),e("div",Be,[e("div",Fe,[t[28]||(t[28]=e("h2",{class:"text-lg font-medium text-gray-900"},"Lista de Produtos",-1)),e("p",Ie,a(A.value)+" produtos encontrados",1)]),N.value?(i(),n("div",Re,[...t[29]||(t[29]=[B('<div class="flex items-center space-x-3"><svg class="animate-spin h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="text-gray-600 font-medium">Carregando produtos...</span></div>',1)])])):X.value.length===0?(i(),n("div",Te,[t[30]||(t[30]=B('<div class="bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><path d="m7.5 4.27 9 5.15"></path><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"></path><path d="m3.3 7 8.7 5 8.7-5"></path><path d="M12 22V12"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 mb-2">Nenhum produto encontrado</h3><p class="text-gray-500 mb-6">Comece criando seu primeiro produto ou ajuste sua busca.</p>',3)),e("button",{onClick:t[2]||(t[2]=o=>D()),class:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 font-medium"}," Criar Primeiro Produto ")])):(i(),n("div",je,[e("table",Se,[t[34]||(t[34]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tipo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Folhas"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32"},"Dimensões"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cor"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Kit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28"},"Mão de Obra"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Custo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"Preço à Vista"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Preço 12x"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lucro"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ações")])],-1)),e("tbody",ze,[(i(!0),n(W,null,Q(X.value,o=>(i(),n("tr",{key:o.key,"data-product-key":o.key,class:"hover:bg-gray-50"},[e("td",Le,[e("span",{class:q(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800":o.type==="PORTA","bg-green-100 text-green-800":o.type==="JANELA","bg-purple-100 text-purple-800":o.type==="SACADA","bg-orange-100 text-orange-800":o.type==="BASCULANTE","bg-gray-100 text-gray-800":o.type==="FIXO","bg-gray-100 text-gray-500":!o.type}])},a(o.type||"-"),3)]),e("td",Ke,a(o.sheets||"-"),1),e("td",Ue,[e("div",De,[e("div",null,a(o.width?o.width+"cm":"-")+" × "+a(o.height?o.height+"cm":"-"),1),e("div",Oe,a(o.measure?o.measure.toFixed(2)+"m²":"-"),1)])]),e("td",He,[e("span",{class:q(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800":o.color==="INCOLOR","bg-green-100 text-green-800":o.color==="VERDE","bg-gray-100 text-gray-800":o.color==="FUME","bg-amber-100 text-amber-800":o.color==="BRONZE","bg-gray-100 text-gray-500":!o.color}])},a(o.color||"-"),3)]),e("td",qe,[C.value===o.key?x((i(),n("input",{key:0,"onUpdate:modelValue":t[3]||(t[3]=r=>g.value=r),onBlur:t[4]||(t[4]=r=>G()),onKeyup:[t[5]||(t[5]=Y(r=>G(),["enter"])),t[6]||(t[6]=Y(r=>ue(),["escape"]))],class:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"R$ 0,00",ref_for:!0,ref:"kitInput",autofocus:""},null,544)),[[w,g.value]]):(i(),n("span",{key:1,onClick:r=>de(o),class:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded"},a(ce(o.kit)),9,Je))]),e("td",Xe,[S(z,{cost:o,field:"laborValue","is-money":!0,onUpdate:(r,c)=>me(r,c,o)},null,8,["cost","onUpdate"])]),e("td",Ze,a(o.cost?"R$ "+o.cost.toFixed(2):"-"),1),e("td",Ge,a(o.price?"R$ "+o.price.toFixed(2):"-"),1),e("td",We,[o.price?(i(),n("div",Qe,[e("div",Ye,"R$ "+a((o.price*1.2).toFixed(2)),1),e("div",et,"12x de R$ "+a((o.price*1.2/12).toFixed(2)),1)])):(i(),n("span",tt,"-"))]),e("td",ot,a(le(o)),1),e("td",st,[e("div",lt,[e("button",{onClick:r=>ie(o),class:"text-green-600 hover:text-green-900 p-1",title:"Adicionar ao Carrinho",disabled:!o.price},[...t[31]||(t[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"8",cy:"21",r:"1"}),e("circle",{cx:"19",cy:"21",r:"1"}),e("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L23 6H6"})],-1)])],8,rt),e("button",{onClick:r=>D(o),class:"text-blue-600 hover:text-blue-900 p-1",title:"Editar Produto"},[...t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e("path",{d:"m15 5 4 4"})],-1)])],8,at),e("button",{onClick:r=>ae(o),class:"text-red-600 hover:text-red-900 p-1",title:"Excluir Produto"},[...t[33]||(t[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c-1 0 2 1 2 2v2"})],-1)])],8,nt)])])],8,Ne))),128))])])])),v.value>1?(i(),n("div",it,[e("div",dt,[e("button",{onClick:t[7]||(t[7]=o=>d.value>1&&M(d.value-1)),disabled:d.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,ut),e("button",{onClick:t[8]||(t[8]=o=>d.value<v.value&&M(d.value+1)),disabled:d.value===v.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Próximo ",8,ct)]),e("div",pt,[e("div",null,[e("p",mt,[t[35]||(t[35]=y(" Mostrando ",-1)),e("span",xt,a((d.value-1)*U.value+1),1),t[36]||(t[36]=y(" até ",-1)),e("span",vt,a(Math.min(d.value*U.value,A.value)),1),t[37]||(t[37]=y(" de ",-1)),e("span",gt,a(A.value),1),t[38]||(t[38]=y(" resultados ",-1))])]),e("div",null,[e("nav",bt,[e("button",{onClick:t[9]||(t[9]=o=>d.value>1&&M(d.value-1)),disabled:d.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[39]||(t[39]=[e("span",{class:"sr-only"},"Anterior",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],8,ft),(i(!0),n(W,null,Q(oe(),o=>(i(),n("button",{key:o,onClick:r=>M(o),class:q([o===d.value?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},a(o),11,yt))),128)),e("button",{onClick:t[10]||(t[10]=o=>d.value<v.value&&M(d.value+1)),disabled:d.value===v.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[40]||(t[40]=[e("span",{class:"sr-only"},"Próximo",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])],8,ht)])])])])):$("",!0)]),_.value?(i(),n("div",wt,[e("div",kt,[e("div",Ct,[e("div",Pt,[e("h3",Vt,a(k.value?"Editar Produto":"Novo Produto"),1),e("button",{onClick:t[11]||(t[11]=o=>_.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[41]||(t[41]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:fe(re,["prevent"]),class:"p-6"},[e("div",_t,[e("div",null,[t[43]||(t[43]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1)),x(e("select",{id:"type","onUpdate:modelValue":t[12]||(t[12]=o=>l.value.type=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[42]||(t[42]=[B('<option value="">Selecione o tipo</option><option value="PORTA">Porta</option><option value="JANELA">Janela</option><option value="SACADA">Sacada</option><option value="BASCULANTE">Basculante</option><option value="FIXO">Fixo</option>',6)])],512),[[ee,l.value.type]])]),e("div",null,[t[44]||(t[44]=e("label",{for:"sheets",class:"block text-sm font-medium text-gray-700 mb-2"},"Folhas",-1)),x(e("input",{id:"sheets","onUpdate:modelValue":t[13]||(t[13]=o=>l.value.sheets=o),type:"number",min:"0",step:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 2"},null,512),[[w,l.value.sheets,void 0,{number:!0}]])]),e("div",null,[t[45]||(t[45]=e("label",{for:"width",class:"block text-sm font-medium text-gray-700 mb-2"},"Largura (cm)",-1)),x(e("input",{id:"width","onUpdate:modelValue":t[14]||(t[14]=o=>l.value.width=o),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"},null,512),[[w,l.value.width,void 0,{number:!0}]])]),e("div",null,[t[46]||(t[46]=e("label",{for:"height",class:"block text-sm font-medium text-gray-700 mb-2"},"Altura (cm)",-1)),x(e("input",{id:"height","onUpdate:modelValue":t[15]||(t[15]=o=>l.value.height=o),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"},null,512),[[w,l.value.height,void 0,{number:!0}]])]),e("div",null,[t[48]||(t[48]=e("label",{for:"color",class:"block text-sm font-medium text-gray-700 mb-2"},"Cor",-1)),x(e("select",{id:"color","onUpdate:modelValue":t[16]||(t[16]=o=>l.value.color=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[47]||(t[47]=[B('<option value="">Selecione a cor</option><option value="INCOLOR">Incolor</option><option value="VERDE">Verde</option><option value="FUME">Fumê</option><option value="BRONZE">Bronze</option>',5)])],512),[[ee,l.value.color]])]),e("div",null,[t[49]||(t[49]=e("label",{for:"kit",class:"block text-sm font-medium text-gray-700 mb-2"},"Kit (R$)",-1)),x(e("input",{id:"kit","onUpdate:modelValue":t[17]||(t[17]=o=>b.value=o),onInput:pe,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"R$ 0,00"},null,544),[[w,b.value]])]),e("div",null,[t[50]||(t[50]=e("label",{for:"weight",class:"block text-sm font-medium text-gray-700 mb-2"},"Peso (kg)",-1)),x(e("input",{id:"weight","onUpdate:modelValue":t[18]||(t[18]=o=>l.value.weight=o),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"},null,512),[[w,l.value.weight,void 0,{number:!0}]])])]),t[57]||(t[57]=B('<div class="mt-6 p-4 bg-blue-50 rounded-lg"><div class="flex items-center"><svg class="w-5 h-5 text-blue-500 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p class="text-sm text-blue-700"> O custo, preço e lucro serão calculados automaticamente com base nas configurações do sistema. </p></div></div>',1)),k.value&&l.value.price?(i(),n("div",Et,[t[54]||(t[54]=e("h4",{class:"text-sm font-semibold text-green-800 mb-3 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),y(" Informações de Preço ")],-1)),e("div",At,[e("div",Mt,[t[51]||(t[51]=e("div",{class:"text-xs text-gray-500 mb-1"},"Preço à Vista",-1)),e("div",$t,"R$ "+a(l.value.price.toFixed(2)),1)]),e("div",Bt,[t[52]||(t[52]=e("div",{class:"text-xs text-gray-500 mb-1"},"Preço Total 12x",-1)),e("div",Ft,"R$ "+a((l.value.price*1.2).toFixed(2)),1)]),e("div",It,[t[53]||(t[53]=e("div",{class:"text-xs text-gray-500 mb-1"},"Valor da Parcela",-1)),e("div",Rt,"12x R$ "+a((l.value.price*1.2/12).toFixed(2)),1)])]),t[55]||(t[55]=e("div",{class:"mt-3 text-xs text-gray-600 text-center"}," * Parcelamento com taxa de 20% aplicada sobre o preço à vista ",-1))])):$("",!0),e("div",Tt,[e("button",{type:"button",onClick:t[19]||(t[19]=o=>_.value=!1),class:"px-6 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"}," Cancelar "),e("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors shadow-sm",disabled:I.value},[I.value?(i(),n("span",St,[...t[56]||(t[56]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Salvando... ",-1)])])):(i(),n("span",zt,a(k.value?"Atualizar":"Criar")+" Produto",1))],8,jt)])],32)])])):$("",!0),F.value?(i(),n("div",Nt,[e("div",Lt,[e("div",Kt,[t[64]||(t[64]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),e("div",Ut,[t[62]||(t[62]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Confirmar Exclusão",-1)),e("p",Dt,[t[58]||(t[58]=y(" Tem certeza que deseja excluir este produto? ",-1)),t[59]||(t[59]=e("br",null,null,-1)),e("strong",Ot,a(P.value?.type)+" - "+a(P.value?.color),1),t[60]||(t[60]=e("br",null,null,-1)),t[61]||(t[61]=e("span",{class:"text-xs text-gray-500"},"Esta ação não pode ser desfeita.",-1))])]),e("div",Ht,[e("button",{type:"button",onClick:t[20]||(t[20]=o=>F.value=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",disabled:E.value}," Cancelar ",8,qt),e("button",{type:"button",onClick:ne,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors shadow-sm",disabled:E.value},[E.value?(i(),n("span",Xt,[...t[63]||(t[63]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Excluindo... ",-1)])])):(i(),n("span",Zt,"Excluir Produto"))],8,Jt)])])])])):$("",!0)])]))}});export{lo as default};
