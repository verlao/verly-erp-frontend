import{T as A,G as i,_ as r,z as D,L as d,f as t,C as w,b as N,u as f,O as _,g as P,Z as L,a as u,m as S}from"./index-D6gXMe8l.js";import{u as j}from"./Card.vue_vue_type_script_setup_true_lang-U-v0E2th-DBT6mFoe.js";import{Z as E}from"./Pagination.vue_vue_type_script_setup_true_lang-CbB9wug3-Bi09SReQ.js";import c from"./api-FIA6GHks-BQrTW_pe.js";import{s as G}from"./_plugin-vue_export-helper-DlAUqK2U-lGy7RumW.js";import"./utils-Bzm_o1ou-QrYiH-A4.js";const y={getAll:async s=>{const l=new URLSearchParams;if(s?.page!==void 0&&l.append("page",s.page.toString()),s?.size!==void 0&&l.append("size",s.size.toString()),s?.sort&&l.append("sort",s.sort),s&&(s.page!==void 0||s.size!==void 0)){const n=`/leads/paginated?${l.toString()}`;return(await c.get(n)).data}return(await c.get("/leads")).data},getAllNonPaginated:async()=>(await c.get("/leads")).data,getById:async s=>(await c.get(`/leads/${s}`)).data,create:async s=>(await c.post("/leads",s)).data,update:async(s,l)=>(await c.put(`/leads/${s}`,l)).data,delete:async s=>(await c.delete(`/leads/${s}`)).data},T={class:"p-6"},B={key:0,class:"p-6 text-center"},O={key:1,class:"p-6 text-center"},Z={key:2,class:"space-y-4"},$=["onClick"],I={class:"flex-1"},M={class:"text-lg font-semibold text-foreground"},R={class:"text-sm text-muted-foreground"},V={key:0,class:"p-4 border-t border-border bg-muted/20"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},U={class:"text-muted-foreground mt-1 leading-relaxed"},q={class:"text-muted-foreground mt-1"},F={class:"text-muted-foreground mt-1"},J={class:"text-muted-foreground mt-1"},K={key:0,class:"py-8 text-center"},Q={key:1,class:"py-12 text-center"},W={key:2,class:"mt-6"},X=A({__name:"Leads",setup(s){const l=i([]),n=i(!0),g=i([]),p=i(1),h=i(10),v=i(0),m=i(0),k=a=>{const e=g.value.indexOf(a);e===-1?g.value.push(a):g.value.splice(e,1)},b=a=>{if(!a)return"";try{const e=new Date(a);return isNaN(e.getTime())?"Data inválida":e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Data inválida"}},x=async()=>{try{n.value=!0;const a=await y.getAll({page:p.value-1,size:h.value});if(a&&typeof a=="object"&&"content"in a)l.value=a.content,v.value=a.totalElements,m.value=a.totalPages;else try{const e=await y.getAllNonPaginated();l.value=Array.isArray(e)?e:[],v.value=l.value.length,m.value=1}catch(e){console.error("Erro no fallback:",e),l.value=[]}}catch(a){console.error("Erro ao carregar leads:",a);try{const e=await y.getAllNonPaginated();l.value=Array.isArray(e)?e:[],v.value=l.value.length,m.value=1}catch(e){console.error("Erro no fallback:",e),l.value=[]}}finally{n.value=!1}};function z(a){p.value=a,x()}function C(a){h.value=a,p.value=1,x()}return D(()=>{x()}),(a,e)=>(d(),r("div",T,[e[9]||(e[9]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Leads"),t("p",{class:"text-lg text-muted-foreground"},"Gerencie todos os leads do sistema")],-1)),w(j,{class:"p-6"},{default:N(()=>[n.value?(d(),r("div",B,[...e[0]||(e[0]=[t("p",{class:"text-muted-foreground"},"Carregando...",-1)])])):l.value.length===0?(d(),r("div",O,[...e[1]||(e[1]=[t("p",{class:"text-muted-foreground"},"Nenhum lead encontrado",-1)])])):(d(),r("div",Z,[(d(!0),r(_,null,P(l.value,o=>(d(),r("div",{key:o.id,class:"bg-white border border-border rounded-lg shadow overflow-hidden"},[t("button",{onClick:L(Y=>k(o.id),["stop"]),class:"w-full p-4 text-left flex items-center justify-between hover:bg-muted/50 transition-colors"},[t("div",I,[t("h3",M,u(o.name),1),t("p",R,u(o.neighborhood)+" • "+u(b(o.createdDate)),1)]),(d(),r("svg",{class:S([{"rotate-180":g.value.includes(o.id)},"h-5 w-5 text-muted-foreground transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,$),g.value.includes(o.id)?(d(),r("div",V,[t("div",H,[t("div",null,[e[3]||(e[3]=t("span",{class:"font-semibold text-foreground"},"Descrição:",-1)),t("p",U,u(o.description),1)]),t("div",null,[e[4]||(e[4]=t("span",{class:"font-semibold text-foreground"},"Telefone:",-1)),t("p",q,u(o.phone),1)]),t("div",null,[e[5]||(e[5]=t("span",{class:"font-semibold text-foreground"},"Email:",-1)),t("p",F,u(o.email),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"font-semibold text-foreground"},"Data de criação:",-1)),t("p",J,u(b(o.createdDate)),1)])])])):f("",!0)]))),128)),n.value?(d(),r("div",K,[...e[7]||(e[7]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1),t("p",{class:"mt-2 text-sm text-muted-foreground"},"Carregando leads...",-1)])])):f("",!0),!n.value&&l.value.length===0?(d(),r("div",Q,[...e[8]||(e[8]=[t("div",{class:"mx-auto h-12 w-12 text-muted-foreground"},[t("svg",{class:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),t("h3",{class:"mt-4 text-lg font-semibold text-foreground"},"Nenhum lead encontrado",-1),t("p",{class:"mt-1 text-muted-foreground"},"Não há leads cadastrados no sistema ainda.",-1)])])):f("",!0),m.value>1?(d(),r("div",W,[w(E,{"current-page":p.value,"total-pages":m.value,"total-items":v.value,"page-size":h.value,onPageChanged:z,onPageSizeChanged:C},null,8,["current-page","total-pages","total-items","page-size"])])):f("",!0)]))]),_:1})]))}}),re=G(X,[["__scopeId","data-v-c878ffa0"]]);export{re as default};
