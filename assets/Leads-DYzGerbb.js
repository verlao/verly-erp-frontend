import{d as z,r as u,o as P,c as r,b as l,e as t,q as b,m as N,f as v,F as D,y as A,t as c,n as L,w as S}from"./index-DcZlzi53.js";import{_ as E}from"./Card.vue_vue_type_script_setup_true_lang-CvdkBcPa.js";import{_ as B}from"./Pagination.vue_vue_type_script_setup_true_lang-DqwkjJFW.js";import g from"./api-1h7xoGYc.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Bzm_o1ou.js";const y={getAll:async o=>{const s=new URLSearchParams;if(o?.page!==void 0&&s.append("page",o.page.toString()),o?.size!==void 0&&s.append("size",o.size.toString()),o?.sort&&s.append("sort",o.sort),o&&(o.page!==void 0||o.size!==void 0)){const i=`/leads/paginated?${s.toString()}`;return(await g.get(i)).data}return(await g.get("/leads")).data},getAllNonPaginated:async()=>(await g.get("/leads")).data,getById:async o=>(await g.get(`/leads/${o}`)).data,create:async o=>(await g.post("/leads",o)).data,update:async(o,s)=>(await g.put(`/leads/${o}`,s)).data,delete:async o=>(await g.delete(`/leads/${o}`)).data},V={class:"p-6"},j={key:0,class:"p-6 text-center"},M={key:1,class:"p-6 text-center"},R={key:2,class:"space-y-4"},q=["onClick"],F={class:"flex-1"},I={class:"text-lg font-semibold text-foreground"},T={class:"text-sm text-muted-foreground"},G={key:0,class:"p-4 border-t border-border bg-muted/20"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},O={class:"text-muted-foreground mt-1 leading-relaxed"},U={class:"text-muted-foreground mt-1"},J={class:"text-muted-foreground mt-1"},K={class:"text-muted-foreground mt-1"},Q={key:0,class:"py-8 text-center"},W={key:1,class:"py-12 text-center"},X={key:2,class:"mt-6"},Y=z({__name:"Leads",setup(o){const s=u([]),d=u(!0),i=u([]),p=u(1),x=u(10),m=u(0),f=u(0),k=a=>{const e=i.value.indexOf(a);e===-1?i.value.push(a):i.value.splice(e,1)},_=a=>{if(!a)return"";try{const e=new Date(a);return isNaN(e.getTime())?"Data inválida":e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Data inválida"}},h=async()=>{try{d.value=!0;const a=await y.getAll({page:p.value-1,size:x.value});if(a&&typeof a=="object"&&"content"in a)s.value=a.content,m.value=a.totalElements,f.value=a.totalPages;else try{const e=await y.getAllNonPaginated();s.value=Array.isArray(e)?e:[],m.value=s.value.length,f.value=1}catch(e){console.error("Erro no fallback:",e),s.value=[]}}catch(a){console.error("Erro ao carregar leads:",a);try{const e=await y.getAllNonPaginated();s.value=Array.isArray(e)?e:[],m.value=s.value.length,f.value=1}catch(e){console.error("Erro no fallback:",e),s.value=[]}}finally{d.value=!1}};function w(a){p.value=a,h()}function C(a){x.value=a,p.value=1,h()}return P(()=>{h()}),(a,e)=>(l(),r("div",V,[e[9]||(e[9]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold tracking-tight text-foreground"},"Leads"),t("p",{class:"text-lg text-muted-foreground"},"Gerencie todos os leads do sistema")],-1)),b(E,{class:"p-6"},{default:N(()=>[d.value?(l(),r("div",j,[...e[0]||(e[0]=[t("p",{class:"text-muted-foreground"},"Carregando...",-1)])])):s.value.length===0?(l(),r("div",M,[...e[1]||(e[1]=[t("p",{class:"text-muted-foreground"},"Nenhum lead encontrado",-1)])])):(l(),r("div",R,[(l(!0),r(D,null,A(s.value,n=>(l(),r("div",{key:n.id,class:"bg-white border border-border rounded-lg shadow overflow-hidden"},[t("button",{onClick:S(Z=>k(n.id),["stop"]),class:"w-full p-4 text-left flex items-center justify-between hover:bg-muted/50 transition-colors"},[t("div",F,[t("h3",I,c(n.name),1),t("p",T,c(n.neighborhood)+" • "+c(_(n.createdDate)),1)]),(l(),r("svg",{class:L([{"rotate-180":i.value.includes(n.id)},"h-5 w-5 text-muted-foreground transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,q),i.value.includes(n.id)?(l(),r("div",G,[t("div",H,[t("div",null,[e[3]||(e[3]=t("span",{class:"font-semibold text-foreground"},"Descrição:",-1)),t("p",O,c(n.description),1)]),t("div",null,[e[4]||(e[4]=t("span",{class:"font-semibold text-foreground"},"Telefone:",-1)),t("p",U,c(n.phone),1)]),t("div",null,[e[5]||(e[5]=t("span",{class:"font-semibold text-foreground"},"Email:",-1)),t("p",J,c(n.email),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"font-semibold text-foreground"},"Data de criação:",-1)),t("p",K,c(_(n.createdDate)),1)])])])):v("",!0)]))),128)),d.value?(l(),r("div",Q,[...e[7]||(e[7]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"},null,-1),t("p",{class:"mt-2 text-sm text-muted-foreground"},"Carregando leads...",-1)])])):v("",!0),!d.value&&s.value.length===0?(l(),r("div",W,[...e[8]||(e[8]=[t("div",{class:"mx-auto h-12 w-12 text-muted-foreground"},[t("svg",{class:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),t("h3",{class:"mt-4 text-lg font-semibold text-foreground"},"Nenhum lead encontrado",-1),t("p",{class:"mt-1 text-muted-foreground"},"Não há leads cadastrados no sistema ainda.",-1)])])):v("",!0),f.value>1?(l(),r("div",X,[b(B,{"current-page":p.value,"total-pages":f.value,"total-items":m.value,"page-size":x.value,onPageChanged:w,onPageSizeChanged:C},null,8,["current-page","total-pages","total-items","page-size"])])):v("",!0)]))]),_:1})]))}}),re=$(Y,[["__scopeId","data-v-c878ffa0"]]);export{re as default};
